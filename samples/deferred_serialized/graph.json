{
    "resources":
    [
        {
            "name":"back-buffer",
            "layout": "texture2d",
            "format" : "rgba8",
            "mip-count" : 1,
            "array-count" : 1
        }
        ,
        {
            "name" : "depth-buffer",
            "layout": "texture2d",
            "format" : "d24s8",
            "mip-count" : 1,
            "array-count" : 1
        }
    ],
    "prototypes":
    [
        {
            "prototype" : "DeferredPass",
            "type" : "render-pass",
            "input" : [],
            "output" : [ 
                {
                    "name" : "gbuffer-color",
                    "layout" : "texture2d",
                    "format" : "rgba8",
                    "usage" : "color",
                    "extent" :
                    {
                        "screen-scale" : 1
                    },
                    "channel-count" : 1
                }, 
                {
                    "name" : "gbuffer-normal-depth",
                    "layout" : "texture2d",
                    "format" : "rgba8",
                    "usage" : "color",
                    "extent" :
                    {
                        "screen-scale" : 1
                    },
                    "channel-count" : 1
                },
                {
                    "name" : "gbuffer-material",
                    "layout" : "texture2d",                    
                    "format" : "rgba8",
                    "usage" : "color",
                    "extent" :
                    {
                        "screen-scale" : 1
                    },
                    "channel-count" : 1
                },
                {
                    "name"   : "depth-buffer",
                    "layout" : "texture2d",
                    "format" : "d24s8",
                    "usage"  : "depth",
                    "extent" :
                    {
                        "screen-scale" : 1
                    },
                    "channel-count" : 1
                }
            ]
        }
        ,
        {
            "prototype" : "DeferredShading",
            "type" : "render-pass",
            "input" : 
            [
                {
                    "name"   : "gbuffer-color",
                    "layout" : "texture2d",
                    "format" : "rgba8",
                    "usage"  : "sampled",
                    "channel-count" : 1
                }, 
                {
                    "name"   : "gbuffer-normal-depth",
                    "layout" : "texture2d",
                    "format" : "rgba8",
                    "usage"  : "sampled",
                    "channel-count" : 1
                },
                {
                    "name" : "gbuffer-material",
                    "layout" : "texture2d",                    
                    "format" : "rgba8",
                    "usage"  : "sampled",
                    "channel-count" : 1
                }
            ],
            "output" : [ 
                {
                    "name" : "color",
                    "layout" : "texture2d",
                    "format" : "rgba8",
                    "usage"  : "color",
                    "extent" :
                    {
                        "screen-scale" : 1
                    },
                    "channel-count" : 1
                }
            ]
        }
        ,
        {
            "!comment" : "resource output pass and input pass will be generated automatically, user don't have to add extra code",
            "prototype" : "back-buffer-input_0_1_0_1",
            "type" : "resource-input",
            "input" : 
            [
                {
                    "name" : "back-buffer",
                    "layout" : "texture2d",
                    "format" : "rgba8",
                    "mip-idx" : 0,
                    "mip-count" : 1,
                    "array-idx" : 0,
                    "array-count" : 1
                }
            ],
            "resource" : "back-buffer"
        }
        ,
        {
            "!comment" : "resource output pass and input pass will be generated automatically, user don't have to add extra code",
            "prototype" : "depth-buffer-input_0_1_0_1",
            "type" : "resource-input",
            "input" : 
            [
                {
                    "name" : "depth-buffer",
                    "layout" : "texture2d",
                    "format" : "d24s8",
                    "mip-idx" : 0,
                    "mip-count" : 1,
                    "array-idx" : 0,
                    "array-count" : 1
                }
            ],
            "resource" : "depth-buffer"
        }
    ],
    "passes":
    [
        {
            "pass" : "gbuffer",
            "prototype" : "DeferredPass"
        },
        {
            "pass" : "deferred-shading",
            "prototype" : "DeferredShading"
        },
        {
            "pass" : "back-buffer-output_0_1_0_1-0",
            "prototype" : "back-buffer-output_0_1_0_1"
        },
        {
            "pass" : "depth-buffer-output_0_1_0_1-0",
            "prototype" : "depth-buffer-output_0_1_0_1"
        }
    ],
    "edges":
    [
        {
            "out" : {
                "pass" : "gbuffer",
                "param" : "gbuffer-color"
            },
            "in" : {
                "pass" : "deferred-shading",
                "param" : "gbuffer-color"
            }
        },
        {
            "out" :
            {
                "pass" : "gbuffer",
                "param" : "gbuffer-normal-depth"
            },
            "in" :
            {
                "pass" : "deferred-shading",
                "param" : "gbuffer-normal-depth"
            }   
        },
        {
            "out" :
            {
                "pass" : "gbuffer",
                "param" : "gbuffer-material"
            },
            "in" :
            {
                "pass" : "deferred-shading",
                "param" : "gbuffer-material"
            }   
        },
        {
            "out" : 
            {
                "pass" : "gbuffer",
                "param" : "depth-buffer"
            },
            "in" :
            {
                "pass" : "depth-buffer-output0-0",
                "param" : "depth-buffer"
            }
        },
        {
            "out" :
            {
                "pass" : "deferred-shading",
                "param" : "color"
            },
            "in" :
            {
                "pass" : "back-buffer-output0-0t",
                "param" : "back-buffer"
            }
        }
    ]
}